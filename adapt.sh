#!/bin/bash
#Script para deshabilitar y habilitar adaptadores de red automaticamente


#### Ver de reemplazar comando ifconfig por ip, no existe en debian####


function adaptador {
clear
echo " ________  ________  ________  ________  _________    ________  ___  ___     ";
echo "|\   __  \|\   ___ \|\   __  \|\   __  \|\___   ___\ |\   ____\|\  \|\  \    ";
echo "\ \  \|\  \ \  \_|\ \ \  \|\  \ \  \|\  \|___ \  \_| \ \  \___|\ \  \\\  \   ";
echo " \ \   __  \ \  \ \\ \ \   __  \ \   ____\   \ \  \   \ \_____  \ \   __  \  ";
echo "  \ \  \ \  \ \  \_\\ \ \  \ \  \ \  \___|    \ \  \ __\|____|\  \ \  \ \  \ ";
echo '   \ \__\ \__\ \_______\ \__\ \__\ \__\        \ \__\\__\____\_\  \ \__\ \__\';
echo '    \|__|\|__|\|_______|\|__|\|__|\|__|         \|__\|__|\_________\|__|\|__|';
echo '                                                        \|_________|         ';

echo '_____________________________________________________________________________'
echo "-----> SE REINICIARAN TODOS LOS ADAPTADORES DE RED <-----"
echo '_____________________________________________________________________________'
ip link set lo down &>/dev/null
echo '_____________________________________________________________________________'
ip a s | grep lo
echo '_____________________________________________________________________________'
ip link set lo up &>/dev/null
sleep 5
echo '_____________________________________________________________________________'
ip a s | grep lo
echo '_____________________________________________________________________________'
echo "-----> SE REINICIO ADAPTADOR DE DE RED DE LOOPBACK <-----"
echo '_____________________________________________________________________________'
i=2;cond=0
while (( $? == 0 )) 
do

adap=$(ip a s | grep "$i: e"| cut -d " " -f 2 | cut -d ":" -f 1)

#~ echo $adap


ip link set $adap down &>/dev/null
if (( $? != 0 ))
then
 return 0
fi 

echo '_____________________________________________________________________________'
ip a s | grep "$i: e"
echo '_____________________________________________________________________________'
ip link set $adap up &>/dev/null
sleep 5
echo '_____________________________________________________________________________'
ip a s | grep "$i: e"
echo '_____________________________________________________________________________'
echo "-----> SE REINICIO ADAPTADOR DE DE RED $adap <-----"
echo '_____________________________________________________________________________'
((i++))
done
}


